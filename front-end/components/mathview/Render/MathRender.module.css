/* Inspired by MathQuill inline math layout */
.root {
  display: inline-block;
  vertical-align: baseline;
  line-height: inherit; /* match Lexical text node line-height */
}

.row {
  display: inline-flex;
  align-items: baseline;
}

.rowInner {
  display: inline-flex;
  align-items: baseline;
  position: relative;
}

.item {
  display: inline-flex;
  align-items: baseline;
  position: relative;
}

.caretAnchor {
  position: relative;
  display: inline-flex;
  align-items: baseline;
}

.symbol {
  display: inline-block;
  vertical-align: middle;
}

.digit {
  letter-spacing: 0; /* tight for digits */
}

.operator {
  margin: 0 0.16em; /* MQ-like operator spacing */
}


/* MathQuill-style cursor with zero-width space */
.caretPlaceholder {
  display: inline;
  font-size: 0;
  color: transparent;
  border-left: 1px solid currentColor;
  margin-left: -1px;
  animation: mq-caret-blink 1s step-start infinite;
}

@keyframes mq-caret-blink {
  0%, 50% { opacity: 1; }
  50.01%, 100% { opacity: 0; }
}

/* Fractions */
.fraction {
  display: inline-block;
  text-align: center;
  /* visually nudge up without affecting line-box */
  transform: translateY(-0.12em);
  padding: 0 0.2em; /* space around fraction */
}

.numerator,
.denominator {
  display: block;
}

.denominator {
  position: relative;
}

.denominator::before {
  content: "";
  position: absolute;
  top: -0.08em; /* fine-tuned for balance */
  left: 0;
  right: 0;
  /* Ensure the fraction bar is always visible: scale with font and never below 1px */
  height: max(1px, 0.06em);
  background: currentColor;
}


/* Exponents */
.exponent {
  display: inline-flex;
  align-items: baseline;
}

.expBase {
  display: inline-flex;
  align-items: baseline;
}

.expRaised {
  display: inline-flex;
  align-items: baseline;
  margin-left: 0.05em;
  transform: translateY(-0.35em);
}

/* absolutely positioned caret inserted inside item wrappers */
.caretAbs {
  position: absolute;
  right: -1px;
  top: 0;
  bottom: 0;
  width: 1px;
  animation: mq-caret-blink 1s step-start infinite;
}

/* leading caret when cursor is first in a row */
.caretStart {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 1px;
  animation: mq-caret-blink 1s step-start infinite;
}


